<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Wallaroo  | Installing with Docker</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.49.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.955516233bcafa4d2a1c13cea63c7b50.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/css/jquery-ui.min.css">
    
      <link rel="stylesheet" href="/css/jquery-ui.theme.min.css">
    
      <link rel="stylesheet" href="/cshighlight.css">
    
      <link rel="stylesheet" href="/css/my.css">
    

    
      
    

    

    <meta property="og:title" content="Installing with Docker" />
<meta property="og:description" content="To get you up and running quickly with Wallaroo, we have provided a Docker image which includes Wallaroo and related tools needed to run and modify a few example applications. We should warn that this Docker image was created with the intent of getting users started quickly with Wallaroo and is not intended to be a fully customizable development environment or suitable for production.
Installing Docker MacOS There are instructions for getting Docker up and running on MacOS on the Docker website." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://docs.wallaroolabs.com/python-installation/python-docker-installation-guide/" />

<meta itemprop="name" content="Installing with Docker">
<meta itemprop="description" content="To get you up and running quickly with Wallaroo, we have provided a Docker image which includes Wallaroo and related tools needed to run and modify a few example applications. We should warn that this Docker image was created with the intent of getting users started quickly with Wallaroo and is not intended to be a fully customizable development environment or suitable for production.
Installing Docker MacOS There are instructions for getting Docker up and running on MacOS on the Docker website.">



<meta itemprop="wordCount" content="2159">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Installing with Docker"/>
<meta name="twitter:description" content="To get you up and running quickly with Wallaroo, we have provided a Docker image which includes Wallaroo and related tools needed to run and modify a few example applications. We should warn that this Docker image was created with the intent of getting users started quickly with Wallaroo and is not intended to be a fully customizable development environment or suitable for production.
Installing Docker MacOS There are instructions for getting Docker up and running on MacOS on the Docker website."/>


    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  </head>

  <body class="ma0 avenir bg-near-white">

    

  <header>
    <div class="bg-green">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://docs.wallaroolabs.com/" class="f3 fw2 hover-white no-underline white-90 dib">
      Wallaroo
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/core-concepts/" title="Core Concepts page">
              Core Concepts
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/python-installation/" title="Installation page">
              Installation
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/python-tutorial/" title="Tutorial page">
              Tutorial
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/operators-manual/" title="Operators Manual page">
              Operators Manual
            </a>
          </li>
          
        </ul>
      
      
<div hidden>
  <span id="new-window-0">Opens in a new window</span>
  <span id="new-window-1">Opens an external site</span>
  <span id="new-window-2">Opens an external site in a new window</span>
</div>









    </div>
  </div>
</nav>

    </div>
  </header>


    <main class="pb7" role="main">
      
  <article class="w-100 ph4 pb5 pb6-ns pt1 pt5-ns">
    <div class="flex-l">

      <div class="order-0 w-100 w-20-l ph5-m ph0-l mb4 sticky dn db-l">
        
<nav role="navigation" class="doc-menu bg-light-gray pl3 pr3">
  <ul class="list pa0 nl2">
    
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pb2 " data-target=".core-concepts">Core Concepts</a>
        <ul class="core-concepts desktopmenu animated fadeIn list pl0 pb2 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="/core-concepts/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Wallaroo Core Concepts
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/core-concepts/state/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              State
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/core-concepts/working-with-state/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Working with State
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/core-concepts/partitioning/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Partitioning
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pb2  primary-color" data-target=".pyinstallation">Python Installation Guide</a>
        <ul class="pyinstallation desktopmenu animated fadeIn list pl0 pb2 bg-light-gray db">
          <li class="f6 fw4">
            <a href="/python-installation/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Choosing an Installation Option
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-installation/python-docker-installation-guide/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 primary-color ">
              Installing with Docker
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-installation/python-vagrant-installation-guide/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Installing with Vagrant
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-installation/python-wallaroo-up-installation-guide/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Installing with Wallaroo Up
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pb2 " data-target=".pytutorial">Python Tutorial</a>
        <ul class="pytutorial desktopmenu animated fadeIn list pl0 pb2 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="/python-tutorial/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Python API Introduction
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/running-a-wallaroo-application/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Running A Wallaroo Application
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/writing-your-own-application/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Writing Your Own Application
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/writing-your-own-stateful-application/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Writing Your Own Stateful Application
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/word-count/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Word Count
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/interworker-serialization-and-resilience/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Inter-worker Serialization and Resilience
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/using-connectors/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Using Connectors as Sources &amp; Sinks
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/api/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Wallaroo Python API Classes
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/debugging/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Debugging
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/tcp-decoders-and-encoders/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              TCP Decoders and Encoders
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/virtualenv/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Wallaroo and Virtualenv
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/python-tutorial/starting-a-new-shell/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Starting a new shell
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pb2 " data-target=".operators-manual">Operators Manual</a>
        <ul class="operators-manual desktopmenu animated fadeIn list pl0 pb2 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="/operators-manual/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Operators Manual
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/operators-manual/running-wallaroo/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Running Wallaroo
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/operators-manual/autoscale/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Autoscale
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/operators-manual/resilience/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Resilience
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/operators-manual/command-line-options/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Command-Line Options
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/operators-manual/metrics-ui/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Wallaroo Metrics UI
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pb2 " data-target=".appendix">Appendix</a>
        <ul class="appendix desktopmenu animated fadeIn list pl0 pb2 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="/appendix/giles-sender/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Giles sender
            </a>
          </li>
          <li class="f6 fw4">
            <a href="/appendix/wallaroo-docker-tips/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Tips for using Wallaroo in Docker
            </a>
          </li>
        </ul>
      </li>
  </ul>
</nav>

      </div>

      <div class="order-2 w-100 w-20-l ph5-m ph0-l mb4 sticky dn db-l"><nav role="toc" class="toc bg-light-gray pl3 pr3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">What's in this document</p>
      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#installing-docker">Installing Docker</a>
<ul>
<li><a href="#macos">MacOS</a></li>
<li><a href="#windows">Windows</a></li>
<li><a href="#linux-ubuntu">Linux Ubuntu</a></li>
</ul></li>
<li><a href="#wallaroo-docker-install">Wallaroo Docker Install</a>
<ul>
<li><a href="#get-the-official-wallaroo-image">Get the official Wallaroo image</a></li>
<li><a href="#what-s-included-in-the-wallaroo-docker-image">What&rsquo;s Included in the Wallaroo Docker image</a></li>
<li><a href="#additional-windows-setup">Additional Windows Setup</a></li>
<li><a href="#sharing-your-drive-with-docker">Sharing your drive with Docker</a></li>
<li><a href="#creating-the-wallaroo-and-python-virtualenv-directories">Creating the Wallaroo and Python Virtualenv directories</a></li>
</ul></li>
<li><a href="#validate-your-installation">Validate your installation</a>
<ul>
<li><a href="#shell-1-start-the-wallaroo-docker-container-for-machida">Shell 1: Start the Wallaroo Docker container for Machida</a></li>
<li><a href="#shell-1-start-the-wallaroo-docker-container-for-machida3">Shell 1: Start the Wallaroo Docker container for Machida3</a></li>
<li><a href="#breaking-down-the-docker-command">Breaking down the Docker command</a></li>
<li><a href="#starting-new-shells">Starting new shells</a></li>
<li><a href="#shell-2-start-the-metrics-ui">Shell 2: Start the Metrics UI</a></li>
<li><a href="#shell-3-run-data-receiver">Shell 3: Run Data Receiver</a></li>
<li><a href="#shell-4-run-the-alerts-application">Shell 4: Run the &ldquo;Alerts&rdquo; Application</a></li>
<li><a href="#check-out-some-metrics">Check Out Some Metrics</a></li>
<li><a href="#shell-5-cluster-shutdown">Shell 5: Cluster Shutdown</a></li>
<li><a href="#wallaroo-container">Wallaroo Container</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </nav>




</div>

      <div class="order-1 w-60-l mw7 ph0 ph5-ns mid-gray nested-copy-line-height no-underline nested-links nested-img nested-copy-seperator nested-blockquote mt0-ns" style="flex-grow:1;">
        <div class="documentation-copy center measure-wide-l">
          <header class="w-100">
          <p class="f6 b helvetica tracked">
            Python Installation
          </p>
          <h1 class="f1 athelas mb1">Installing with Docker</h1>
          </header>

          <main class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l">

<p>To get you up and running quickly with Wallaroo, we have provided a Docker image which includes Wallaroo and related tools needed to run and modify a few example applications. We should warn that this Docker image was created with the intent of getting users started quickly with Wallaroo and is not intended to be a fully customizable development environment or suitable for production.</p>

<h2 id="installing-docker">Installing Docker</h2>

<h3 id="macos">MacOS</h3>

<p>There are <a href="https://docs.docker.com/docker-for-mac/">instructions</a> for getting Docker up and running on MacOS on the Docker website.  We recommend the &lsquo;Standard&rsquo; version of the &lsquo;Docker for Mac&rsquo; package.</p>

<p>Installing Docker will result in it running on your machine. After you reboot your machine, that will no longer be the case. In the future, you&rsquo;ll need to have Docker running in order to use a variety of commands in this book. We suggest that you <a href="https://docs.docker.com/docker-for-mac/#general">set up Docker to boot automatically</a>.</p>

<h3 id="windows">Windows</h3>

<p>There are <a href="https://docs.docker.com/docker-for-windows/">instructions</a> for getting Docker up and running on Windows on the Docker website. We recommend installing the latest stable release, as there are breaking changes to our commands on edge releases. Installing Docker will result in it running on your machine. After you reboot your machine, that will no longer be the case. In the future, you&rsquo;ll need to have Docker running in order to use a variety of commands in this book. We suggest that you <a href="https://docs.docker.com/docker-for-windows/#general">set up Docker to boot automatically</a>.</p>

<p>Currently, development is only supported for Linux containers within Docker.</p>

<h3 id="linux-ubuntu">Linux Ubuntu</h3>

<p>There are <a href="https://docs.docker.com/engine/installation/linux/ubuntu/">instructions</a> for getting Docker up and running on Ubuntu on the Docker website.</p>

<p>Installing Docker will result in it running on your machine. After you reboot your machine, that will no longer be the case. In the future, you&rsquo;ll need to have Docker running in order to use a variety of commands in this book. We suggest that you <a href="https://docs.docker.com/engine/installation/linux/linux-postinstall/#configure-docker-to-start-on-boot">set up Docker to boot automatically</a>.</p>

<p>All of the Docker commands throughout the rest of this manual assume that you have permission to run Docker commands as a non-root user. Follow the <a href="https://docs.docker.com/engine/installation/linux/linux-postinstall/#manage-docker-as-a-non-root-user">Manage Docker as a non-root user</a> instructions to set that up. If you don&rsquo;t want to allow a non-root user to run Docker commands, you&rsquo;ll need to run <code>sudo docker</code> anywhere you see <code>docker</code> for a command.</p>

<h2 id="wallaroo-docker-install">Wallaroo Docker Install</h2>

<h3 id="get-the-official-wallaroo-image">Get the official Wallaroo image</h3>

<pre><code class="language-bash">docker pull wallaroo-labs-docker-wallaroolabs.bintray.io/dev/wallaroo:0.6.0
</code></pre>

<h3 id="what-s-included-in-the-wallaroo-docker-image">What&rsquo;s Included in the Wallaroo Docker image</h3>

<ul>
<li><p><strong>Machida</strong>: runs Wallaroo Python applications for Python 2.7.</p></li>

<li><p><strong>Machida3</strong>: runs Wallaroo Python applications for Python 3.5+.</p></li>

<li><p><strong>Giles Sender</strong>: supplies data to Wallaroo applications over TCP.</p></li>

<li><p><strong>Data Receiver</strong>: receives data from Wallaroo over TCP.</p></li>

<li><p><strong>Cluster Shutdown tool</strong>: notifies the cluster to shut down cleanly.</p></li>

<li><p><strong>Metrics UI</strong>: receives and displays metrics for running Wallaroo applications.</p></li>

<li><p><strong>Wallaroo Source Code</strong>: full Wallaroo source code is provided, including Python example applications.</p></li>

<li><p><strong>Machida with Resilience</strong>: runs Wallaroo Python 2.7 applications and writes state to disk for recovery. This version of Machida can be used via the <code>machida-resilience</code> and <code>machida3-resilience</code> binaries. See the <a href="/python-tutorial/interworker-serialization-and-resilience/">Interworker Serialization and Resilience</a> documentation for general information and the <a href="/operators-manual/command-line-options/#resilience">Resilience</a> section of our <a href="/operators-manual/command-line-options/">Command Line Options</a> documentation for information on its usage.</p></li>

<li><p><strong>Machida3 with Resilience</strong>: similar to Machida with Resilience, but for Python 3.5+.</p></li>
</ul>

<h3 id="additional-windows-setup">Additional Windows Setup</h3>

<p>There are a few extra recommended steps that Windows users should make before continuing on to starting the Wallaroo Docker image. These steps are needed in order to persist the Wallaroo source code and Python virtual environment using <a href="https://virtualenv.pypa.io/en/stable/">virtualenv</a> onto your local machine from within the Wallaroo Docker container. This will allow code changes and installed Python modules to persist beyond the lifecycle of a Docker container.</p>

<p>These steps are optional, but will require the removal of the <code>-v</code> options when starting the Wallaroo Docker image if you choose to opt out.</p>

<h3 id="sharing-your-drive-with-docker">Sharing your drive with Docker</h3>

<p>You can find instructions for setting up a shared drive with Docker on Windows <a href="https://docs.docker.com/docker-for-windows/#shared-drives">here</a>.</p>

<p>The remainder of this tutorial assumes you shared the <code>C</code> drive, modify the commands as needed if sharing a different drive.</p>

<h3 id="creating-the-wallaroo-and-python-virtualenv-directories">Creating the Wallaroo and Python Virtualenv directories</h3>

<p>We&rsquo;ll need to create two directories, one for the Wallaroo source code and one for the Python virtual environment.</p>

<p>To create the Wallaroo source code directory run the following command in Powershell or Command Prompt:</p>

<pre><code class="language-bash">mkdir c:\wallaroo-docker\wallaroo-0.6.0\wallaroo-src
</code></pre>

<p>To create the Wallaroo Python virtual environment directory run the following command in Powershell or Command Prompt:</p>

<pre><code class="language-bash">mkdir c:\wallaroo-docker\wallaroo-0.6.0\python-virtualenv
</code></pre>

<p>Your Windows machine is now all set to continue!</p>

<p>Awesome! All set. Time to try running your first Wallaroo application in Docker.</p>

<h2 id="validate-your-installation">Validate your installation</h2>

<p>In this section, we&rsquo;re going to run an example Wallaroo application in Docker. By the time you are finished, you&rsquo;ll have validated that your Docker environment is set up and working correctly.</p>

<p>There are a few Wallaroo support applications that you&rsquo;ll be interacting with for the first time:</p>

<ul>
<li>Our Metrics UI allows you to monitor the performance and health of your applications.</li>
<li>Data receiver is designed to capture TCP output from Wallaroo applications.</li>
<li>Machida or Machida3, our program for running Wallaroo Python applications, for Python 2.7 and 3.5+ respectively..</li>
</ul>

<p>You&rsquo;re going to set up our &ldquo;Alerts&rdquo; example application. We will use an internal generator source to generate simulated inputs into the system. Data receiver will receive the output, and our Metrics UI will be running so you can observe the overall performance.</p>

<p>The Metrics UI process will be run in the background. The other two processes (data_receiver and Wallaroo) will run in the foreground. We recommend that you run each process in a separate terminal.</p>

<aside class="admonition note">
  <div class="admonition-content"><p>If you haven&rsquo;t set up Docker to run without root, you will need to use <code>sudo</code> with your Docker commands.</p>
</div>
</aside>


<p>Let&rsquo;s get started!</p>

<p>Since Wallaroo is a distributed application, its components need to run separately, and concurrently, so that they may connect to one another to form the application cluster. For this example, you will need 5 separate terminal shells to start the docker container, run the metrics UI, run a sink, run the Alerts application, and eventually, to send a cluster shutdown command.</p>

<h3 id="shell-1-start-the-wallaroo-docker-container-for-machida">Shell 1: Start the Wallaroo Docker container for Machida</h3>





<div id="tabset-python-installation-python-docker-installation-guide-1">
<ul>
  
    
  <li><a href="#tabset-python-installation-python-docker-installation-guide-1-0">Unix</a></li>

    
  <li><a href="#tabset-python-installation-python-docker-installation-guide-1-1">Powershell</a></li>

    
  <li><a href="#tabset-python-installation-python-docker-installation-guide-1-2">Windows Command Prompt</a></li>

</ul>


<div id="tabset-python-installation-python-docker-installation-guide-1-0">
  
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
docker run --rm -it --privileged -p <span style="color:#ae81ff">4000</span>:4000 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-v /tmp/wallaroo-docker/wallaroo-0.6.0/wallaroo-src:/src/wallaroo <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-v /tmp/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida:/src/python-virtualenv <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--name wally <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>wallaroo-labs-docker-wallaroolabs.bintray.io/dev/wallaroo:0.6.0
</code></pre></div>
  
</div>


<div id="tabset-python-installation-python-docker-installation-guide-1-1">
  
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
docker run --rm -it --privileged -p <span style="color:#ae81ff">4000</span>:4000 <span style="color:#e6db74">`</span>
-v c:/wallaroo-docker/wallaroo--0.6.0/wallaroo-src:/src/wallaroo <span style="color:#e6db74">`</span>
-v c:/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida:/src/python-virtualenv <span style="color:#e6db74">`</span>
--name wally <span style="color:#e6db74">`</span>
wallaroo-labs-docker-wallaroolabs.bintray.io/dev/wallaroo:0.6.0
</code></pre></div>
  
</div>


<div id="tabset-python-installation-python-docker-installation-guide-1-2">
  
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
docker run --rm -it --privileged -p <span style="color:#ae81ff">4000</span>:4000 ^
-v c:/wallaroo-docker/wallaroo-0.6.0/wallaroo-src:/src/wallaroo ^
-v c:/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida:/src/python-virtualenv ^
--name wally ^
wallaroo-labs-docker-wallaroolabs.bintray.io/dev/wallaroo:0.6.0
</code></pre></div>
  
</div>

</div>

<script>$(function(){$("#tabset-python-installation-python-docker-installation-guide-1").tabs();});</script>


<h3 id="shell-1-start-the-wallaroo-docker-container-for-machida3">Shell 1: Start the Wallaroo Docker container for Machida3</h3>





<div id="tabset-python-installation-python-docker-installation-guide-2">
<ul>
  
    
  <li><a href="#tabset-python-installation-python-docker-installation-guide-2-0">Unix</a></li>

    
  <li><a href="#tabset-python-installation-python-docker-installation-guide-2-1">Powershell</a></li>

    
  <li><a href="#tabset-python-installation-python-docker-installation-guide-2-2">Windows Command Prompt</a></li>

</ul>


<div id="tabset-python-installation-python-docker-installation-guide-2-0">
  
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
docker run --rm -it --privileged -p <span style="color:#ae81ff">4000</span>:4000 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-v /tmp/wallaroo-docker/wallaroo-0.6.0/wallaroo-src:/src/wallaroo <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-v /tmp/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida3:/src/python-virtualenv <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--name wally <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>wallaroo-labs-docker-wallaroolabs.bintray.io/dev/wallaroo:0.6.0 -p python3
</code></pre></div>
  
</div>


<div id="tabset-python-installation-python-docker-installation-guide-2-1">
  
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run --rm -it --privileged -p <span style="color:#ae81ff">4000</span>:4000 <span style="color:#e6db74">`</span>
-v c:/wallaroo-docker/wallaroo--0.6.0/wallaroo-src:/src/wallaroo <span style="color:#e6db74">`</span>
-v c:/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida3:/src/python-virtualenv <span style="color:#e6db74">`</span>
--name wally <span style="color:#e6db74">`</span>
wallaroo-labs-docker-wallaroolabs.bintray.io/dev/wallaroo:0.6.0 -p python3
</code></pre></div>
  
</div>


<div id="tabset-python-installation-python-docker-installation-guide-2-2">
  
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run --rm -it --privileged -p <span style="color:#ae81ff">4000</span>:4000 ^
-v c:/wallaroo-docker/wallaroo-0.6.0/wallaroo-src:/src/wallaroo ^
-v c:/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida3:/src/python-virtualenv ^
--name wally ^
wallaroo-labs-docker-wallaroolabs.bintray.io/dev/wallaroo:0.6.0 -p python3
</code></pre></div>
  
</div>

</div>

<script>$(function(){$("#tabset-python-installation-python-docker-installation-guide-2").tabs();});</script>


<h3 id="breaking-down-the-docker-command">Breaking down the Docker command</h3>

<ul>
<li><p><code>docker run</code>: The Docker command to start a new container.</p></li>

<li><p><code>--rm</code>: Automatically clean up the container and remove the file system on exit.</p></li>

<li><p><code>-it</code>: Allows us to work with interactive processes by allocating a tty for the container.</p></li>

<li><p><code>--privileged</code>: Gives the container access to the hosts&rsquo; devices. This allows certain system calls to be used by Wallaroo, specifically <code>mbind</code> and <code>set_mempolicy</code>. This setting is optional, but by excluding it there will be a performance degradation in Wallaroo&rsquo;s processing capabilities.</p></li>

<li><p><code>-p 4000:4000</code>: Maps the default port for HTTP requests for the Metrics UI from the container to the host. This makes it possible to call up the Metrics UI from a browser on the host.</p></li>

<li><p><code>-v /tmp/wallaroo-docker/wallaroo-0.6.0/wallaroo-src:/src/wallaroo</code>: Mounts a host directory as a data volume within the container. The first time you run this, an empty directory needs to be used in order for the Docker container to copy the Wallaroo source code to your host. If an empty directory is not used, we are assuming it is prepopulated with the Wallaroo source code from this point forward. This allows you to open and modify the Wallaroo source code with the editor of your choice on your host. The Wallaroo source code will persist on your machine after the container is stopped or deleted. This setting is optional, but without it you would need to use an editor within the container to view or modify the Wallaroo source code.</p></li>

<li><p><code>-v /tmp/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida(machida3):/src/python-virtualenv</code>: Mounts a host directory as a data volume within the container. The first time this is run for the provided directory, this command will setup a persistent Python virtual environment using <a href="https://virtualenv.pypa.io/en/stable/">virtualenv</a> for the container on your host. Thus, if you need to install any python modules using <code>pip</code> or <code>easy_install</code> they will persist after the container is stopped or deleted. This setting is optional, but without it, you will not have a persistent <code>virtualenv</code> for the container. We ask you to mount to <code>/tmp/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida</code> when using <code>machida</code> and <code>/tmp/wallaroo-docker/wallaroo-0.6.0/python-virtualenv-machida3</code> when using <code>machida3</code> to avoid having conflicting <code>virtualenv</code> environments.</p></li>

<li><p><code>--name wally</code>: The name for the container. This setting is optional but makes it easier to reference the container in later commands.</p></li>

<li><p><code>-p python3</code>: This is a required argument if you will be running <code>machida3</code>. This argument allows us to set the python interpreter for the <code>virtualenv</code> environment to <code>python3</code> instead of the default <code>python2</code>. If you plan to run <code>machida</code>, this argument is not needed.</p></li>
</ul>

<h3 id="starting-new-shells">Starting new shells</h3>

<p>For each Shell you&rsquo;re expected to setup, you&rsquo;d have to run the following to enter the Wallaroo Docker container:</p>

<p>Enter the Wallaroo Docker container:</p>





<div id="tabset-python-installation-python-docker-installation-guide-3">
<ul>
  
    
  <li><a href="#tabset-python-installation-python-docker-installation-guide-3-0">Machida</a></li>

    
  <li><a href="#tabset-python-installation-python-docker-installation-guide-3-1">Machida3</a></li>

</ul>


<div id="tabset-python-installation-python-docker-installation-guide-3-0">
  
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
docker exec -it wally env-setup
</code></pre></div>
  
</div>


<div id="tabset-python-installation-python-docker-installation-guide-3-1">
  
    <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
docker exec -it wally env-setup -p python3
</code></pre></div>
  
</div>

</div>

<script>$(function(){$("#tabset-python-installation-python-docker-installation-guide-3").tabs();});</script>


<p>This command will start a new Bash shell within the container, which will run the <code>env-setup</code> script to ensure our persistent Python <code>virtualenv</code> is set up.</p>

<h3 id="shell-2-start-the-metrics-ui">Shell 2: Start the Metrics UI</h3>

<p>To start the Metrics UI run:</p>

<pre><code class="language-bash">metrics_reporter_ui start
</code></pre>

<p>You can verify it started up correctly by visiting <a href="http://localhost:4000">http://localhost:4000</a>.</p>

<p>If you need to restart the UI, run:</p>

<pre><code class="language-bash">metrics_reporter_ui restart
</code></pre>

<p>When it&rsquo;s time to stop the UI, run:</p>

<pre><code class="language-bash">metrics_reporter_ui stop
</code></pre>

<p>If you need to start the UI after stopping it, run:</p>

<pre><code class="language-bash">metrics_reporter_ui start
</code></pre>

<h3 id="shell-3-run-data-receiver">Shell 3: Run Data Receiver</h3>

<p>We&rsquo;ll use Data Receiver to listen for data from our Wallaroo application.</p>

<pre><code class="language-bash">data_receiver --listen 127.0.0.1:5555 --no-write --ponythreads=1 --ponynoblock
</code></pre>

<p>Data Receiver will start up and receive data without creating any output. By default, it prints received data to standard out, but we are giving it the <code>--no-write</code> flag which results in no output.</p>

<h3 id="shell-4-run-the-alerts-application">Shell 4: Run the &ldquo;Alerts&rdquo; Application</h3>

<p>First, we&rsquo;ll need to get to the python Alerts example directory with the following command:</p>

<pre><code class="language-bash">cd /src/wallaroo/examples/python/alerts_stateful
</code></pre>

<p>Now that we are in the proper directory, and the Metrics UI and Data receiver are up and running, we can run the application itself by executing the following command (remember to use the <code>machida3</code> executable instead of <code>machida</code> if you are using Python 3.X):</p>

<pre><code class="language-bash">machida --application-module alerts \
  --out 127.0.0.1:5555 --metrics 127.0.0.1:5001 --control 127.0.0.1:6000 \
  --data 127.0.0.1:6001 --name worker-name --external 127.0.0.1:5050 \
  --cluster-initializer --ponythreads=1 --ponynoblock
</code></pre>

<p>This tells the &ldquo;Alerts&rdquo; application that it should write outgoing data to port <code>5555</code>, and send metrics data to port <code>5001</code>.</p>

<h3 id="check-out-some-metrics">Check Out Some Metrics</h3>

<p>Once the application has successfully initialized, the internal test generator source will begin simulating inputs into the system. If you <a href="http://localhost:4000">visit the Metrics UI</a>, the landing page should show you that the &ldquo;Alerts&rdquo; application has successfully connected.</p>

<p><img src="/images/metrics/landing-page.png" alt="Landing Page" /></p>

<p>If your landing page resembles the one above, the &ldquo;Alerts&rdquo; application has successfully connected to the Metrics UI.</p>

<p>Now, let&rsquo;s have a look at some metrics. By clicking on the &ldquo;Alerts&rdquo; link, you&rsquo;ll be taken to the &ldquo;Application Dashboard&rdquo; page. On this page you should see metric stats for the following:</p>

<ul>
<li>a single pipeline: <code>Alerts</code></li>
<li>a single worker: <code>Initializer</code></li>
<li>a single computation: <code>check transaction total</code></li>
</ul>

<p><img src="/images/metrics/application-dashboard-page.png" alt="Application Dashboard Page" /></p>

<p>You&rsquo;ll see the metric stats update as data continues to be processed in our application.</p>

<p>You can then click into one of the elements within a category to get to a detailed metrics page for that element. If we were to click into the <code>check transaction total</code> computation, we&rsquo;ll be taken to this page:</p>

<p><img src="/images/metrics/computation-detailed-metrics-page.png" alt="Computation Detailed Metrics page" /></p>

<p>Feel free to click around and get a feel for how the Metrics UI is set up and how it is used to monitor a running Wallaroo application. If you&rsquo;d like a deeper dive into the Metrics UI, have a look at our <a href="/operators-manual/metrics-ui/">Monitoring Metrics with the Monitoring Hub</a> section.</p>

<h3 id="shell-5-cluster-shutdown">Shell 5: Cluster Shutdown</h3>

<p>You can shut down the cluster with this command at any time:</p>

<pre><code class="language-bash">cluster_shutdown 127.0.0.1:5050
</code></pre>

<p>You can shut down Data Receiver by pressing Ctrl-c from its shell.</p>

<p>You can shut down the Metrics UI with the following command:</p>

<pre><code class="language-bash">metrics_reporter_ui stop
</code></pre>

<h3 id="wallaroo-container">Wallaroo Container</h3>

<p>To shut down the Wallaroo container, use the <code>docker stop</code> command in a shell on your host:</p>

<pre><code class="language-bash">docker stop wally
</code></pre>

<p>This command will also terminate any active sessions you may have left open to the docker container.</p>

<p>For tips on editing existing Wallaroo example code or installing Python modules within Docker, have a look at our <a href="/appendix/wallaroo-docker-tips/">Tips for using Wallaroo in Docker</a> section.</p>
</main>
        </div>
      </div>
    </div>
  </article>

    </main>
    <footer class="bg-green bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://docs.wallaroolabs.com/" >
    &copy; 2018 Wallaroo
  </a>
    <div>
<div hidden>
  <span id="new-window-0">Opens in a new window</span>
  <span id="new-window-1">Opens an external site</span>
  <span id="new-window-2">Opens an external site in a new window</span>
</div>








</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/pony.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
  var toggleBtns = document.getElementsByClassName('js-toggle')
  for (var i = 0; i < toggleBtns.length; i++) {
    toggleBtns[i].addEventListener('click', toggleClass, false)
  }

function toggleClass() {
  
  var content = this.dataset.target.split(' ')
  
  var mobileCurrentlyOpen = document.querySelector('.mobilemenu:not(.dn)')
  var desktopCurrentlyOpen = document.querySelector('.desktopmenu:not(.dn)')
  var desktopActive = document.querySelector('.desktopmenu:not(.dn)')

  
  for (var i = 0; i < content.length; i++) {
    var matches = document.querySelectorAll(content[i]);
    
    [].forEach.call(matches, function(dom) {
        dom.classList.contains('dn') ?
        dom.classList.remove('dn') :
        dom.classList.add('dn');
         return false;
       });
        
      if (mobileCurrentlyOpen) mobileCurrentlyOpen.classList.add('dn')
      if (desktopCurrentlyOpen) desktopCurrentlyOpen.classList.add('dn')
      if (desktopActive) desktopActive.classList.remove('db')

    }
  }




  let codeBlocks = document.getElementsByTagName('code')
    for (let [key, codeBlock] of Object.entries(codeBlocks)){
    var widthDif = codeBlock.scrollWidth - codeBlock.clientWidth
    if (widthDif > 0)
      codeBlock.parentNode.classList.add('expand')
  }

</script>


  </body>
</html>
